<div class="animated fadeIn">
  <div class="row">
    <div class="col-lg-12">
      <div class="card">
        <div class="card-header">
          <i class="fa fa-user-secret"></i> Usuários
        </div>
        <div class="card-block">
          <div class="table-responsive mt-4">
            <table class="table table-striped" [mfData]="habilitacao" #mfHabilitacao="mfDataTable" [mfRowsOnPage]="5">
              <thead>
                <tr>

                  <th>
                    <mfDefaultSorter by="usuarioId">Id</mfDefaultSorter>
                  </th>
                  <th>
                    <mfDefaultSorter by="leilao">Leilão</mfDefaultSorter>
                  </th>
                  <th>
                    <mfDefaultSorter by="pessoa">Usuário</mfDefaultSorter>
                  </th>
                  <th>
                    <mfDefaultSorter by="dataCadastro">Data Cadastro</mfDefaultSorter>
                  </th>
                  <th>
                    <mfDefaultSorter by="para">Para</mfDefaultSorter>
                  </th>
                  <th>
                    <mfDefaultSorter by="tipoValidacaoRegra">Regra de Validação</mfDefaultSorter>
                  </th>
                  <th>
                    <mfDefaultSorter by="ativo">Aprovado</mfDefaultSorter>
                  </th>
                  <th>
                    <mfDefaultSorter by="documentos">Documentos</mfDefaultSorter>
                  </th>
                  <th>
                    <mfDefaultSorter by="aprovar">Aprovar</mfDefaultSorter>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let item of mfHabilitacao.data; let i = index">
                  <td>{{item.solicitacaoHabilitacaoId}}</td>
                  <td>{{item.leilao.nome}}</td>
                  <td>{{item.usuario.pessoa}}</td>
                  <td>{{item.dataCadastro | amDateFormat:'DD/MM/yyyy' }}</td>
                  <td>{{item.para}}</td>
                  <td>{{item.regraHabilitacao.tipoValidacaoRegra === 'TEL'? 'Telefone' : '' }}</td>
                  <td>{{item.habilitado ? 'Sim' : 'Não' }}</td>
                  <td class="text-center" nowrap>
                    <p *ngIf="item.documentos.length == 0">Sem Documentos</p>
                    <button *ngIf="item.documentos.length > 0" type="button" class="btn btn-primary"
                      (click)="openModal(documento, i)"><i class="fa fa-edit"></i>&nbsp; Documentos</button>
                  </td>
                  <td class="text-center" nowrap>
                    <button type="button" *ngIf="item.leilao.temAnaliseCadastral" class="btn btn-primary"
                      (click)="openModal(aprovar, i)"><i class="fa fa-edit"></i>&nbsp; Aprovar</button>
                    <button type="button" *ngIf="!item.leilao.temAnaliseCadastral" class="btn btn-primary"
                      (click)="aprovar(item.solicitacaoHabilitacaoId, i)" [disabled]="item.habilitado"><i
                        class="fa fa-edit"></i>&nbsp; Aprovar</button>
                  </td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <td colspan="9">
                    <mfBootstrapPaginator [rowsOnPageSet]="[5,10,25]"></mfBootstrapPaginator>
                  </td>
                </tr>
              </tfoot>
            </table>
          </div>
          <ng-template #documento>
            <div class="modal-header">
              <h4 class="modal-title pull-left">Documentos</h4>
              <button type="button" class="btn-close close pull-right" aria-label="Close" (click)="modalRef?.hide()">
                <span aria-hidden="true" class="visually-hidden">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              {{documentosUsuario.documentos.length > 0 ? documentosUsuario.documentos : 'Não existem documentos para
              serem listados'}}

            </div>
          </ng-template>
          <ng-template #aprovar>
            <div class="modal-header">
              <h4 class="modal-title pull-left">Análise de Crédito</h4>
              <button type="button" class="btn-close close pull-right" aria-label="Close" (click)="modalRef?.hide()">
                <span aria-hidden="true" class="visually-hidden">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <form [formGroup]="formulario" (ngSubmit)="aprovar()">
                <div class="card-block">
                  <div class="row">
  
                    <div class="form-group col-12">
                      <label>Limite de Crédito</label>
                      <input type="number" class="form-control" formControlName="limiteCredito">
  
                    </div>
                  </div>
                  <div class="row">
                    <div class="form-group col-12">
                      <label for="exampleFormControlTextarea1">Observação</label>
                      <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" formControlName="observacao"></textarea>
                    </div>
                  </div>
                </div>
  
                <div class="row">
                  <div class="form-group col-4">
                    <button type="button"  class="btn btn-primary form-control"
                        (click)="aprovarLimiteDeCredito()" ><i
                          ></i>&nbsp; Aprovar</button>
                  </div>
  
                </div>
  
              </form>
              

            </div>
          </ng-template>

        </div>
      </div>
    </div>
  </div>
</div>