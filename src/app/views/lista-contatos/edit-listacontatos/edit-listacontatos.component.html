<form [formGroup]="formulario" (ngSubmit)="onSubmit()" appFocus *ngIf="formulario">
  <div class="animated fadeIn">
    <div class="row">
      <div class="col-lg-12">
        <div class="card">
          <div class="card-header d-flex align-items-center">
            <i class="fa fa-users"></i>
            &nbsp;Lista de contatos
          </div>
          <div class="card-block">
            <div class="row" >
              <div class="col-12">
                <div class="row ">
                  <div class="form-group col-6" >
                    <label for="descricao">Descrição</label>
                    <input type="text" class="form-control" [ngClass]="aplicaCssErro('descricao')" id="descricao" placeholder="Descrição" name="descricao" formControlName="descricao"  triggers="keypress:focusout">
                  </div>
                  <div class="form-group col-6">
                    <label for="empresaId">Empresa  </label>
                    <select class="form-control" [ngClass]="aplicaCssErro('empresaId')" formControlName="empresaId" name="empresa">
                      <option *ngFor="let item of empresas" value="{{item.empresaId}}">{{item.nomeFantasia}}</option>
                    </select>
                  </div>

                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
  <div class="animated fadeIn">
    <div class="row">
      <div class="col-lg-12">
        <div class="card">
          <div class="card-header d-flex align-items-center">
            <i class="fa fa-user" aria-hidden="true"></i>
            &nbsp;Contatos
          </div>
          <div class="card-block">
            <div class="row" >
              <div class="col-12">
                <div class="row ">
                  <table class="table table-striped" [mfData]="contato" #mfContatos="mfDataTable" [mfRowsOnPage]="100">
                    <thead>
                      <tr>

                        <th>
                          <mfDefaultSorter by="nomeCompleto">Nome</mfDefaultSorter>
                        </th>
                        <th>
                          <mfDefaultSorter by="email">Email</mfDefaultSorter>
                        </th>
                        <th>
                          <mfDefaultSorter by="telefoneCelular">Telefone:</mfDefaultSorter>
                        </th>
                        <th>
                          <mfDefaultSorter by="incluir">Incluir:</mfDefaultSorter>
                        </th>



                      </tr>
                    </thead>
                    <tbody formArrayName="contatos" *ngIf="this.formulario.value.contatos.length > 0">
                      <tr *ngFor="let item of mfContatos.data; let i = index">
                        <td>{{item.nomeCompleto}}</td>
                        <td>{{item.email}}</td>
                        <td>{{item.telefoneCelular}}</td>
                        <td id="jstf-cnt" [formGroupName]="i" ><input type="checkbox" formControlName="value" (click)="incluirContato(item, i )" ></td>


                      </tr>
                      <tr *ngIf="loading">
                        <td class="text-center text-muted" colspan="9">
                          <h5><i class="fa fa-spin fa-spinner"></i>&nbsp;Carregando...</h5>
                        </td>
                      </tr>
                    </tbody>
                    <tfoot>
                      <tr>
                        <td colspan="9">
                          <mfBootstrapPaginator [rowsOnPageSet]="[5,10,25]"></mfBootstrapPaginator>
                        </td>
                      </tr>
                    </tfoot>
                  </table>

                </div>
              </div>
            </div>
          </div>
          <div class="card-footer">
            <button type="submit" class="btn btn-primary saveCancel"><i class="fa fa-save"></i> Salvar</button>
            <button type="reset" class="btn btn-danger" [routerLink]="['/listacontatos']"><i class="fa fa-undo"></i>
              Cancelar</button>

            <!-- <button  class="btn btn-warning" ><i class="fa fa-undo"></i>
                Desativar</button> -->
          </div>
        </div>
      </div>
    </div>
  </div>
</form>
